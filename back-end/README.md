In terms of approach - 

I wonder if the correct design would be to create a database of rules and then letters?

So a database of 3-letter combos, but then each combo will have 